<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Dev-Mex - containers</title><link href="https://mvaldes14.github.io/blog/" rel="alternate"></link><link href="https://mvaldes14.github.io/blog/feeds/containers.atom.xml" rel="self"></link><id>https://mvaldes14.github.io/blog/</id><updated>2020-03-04T00:00:00-06:00</updated><subtitle>IT Things.</subtitle><entry><title>My Home Docker Setup</title><link href="https://mvaldes14.github.io/blog/docker-home-setup.html" rel="alternate"></link><published>2020-03-04T00:00:00-06:00</published><updated>2020-03-04T00:00:00-06:00</updated><author><name>Miguel Valdes</name></author><id>tag:mvaldes14.github.io,2020-03-04:/blog/docker-home-setup.html</id><summary type="html">&lt;p&gt;Recently decided to migrate all of the things that I run on my personal computer and a little server I got for Xmas (originally for &lt;span class="caps"&gt;PLEX&lt;/span&gt;) as well as my raspberry pi to docker containers so that I could experiment more with it and boy, not as easy as I thought it was going to&amp;nbsp;be.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Recently decided to migrate all of the things that I run on my personal computer and a little server I got for Xmas (originally for &lt;span class="caps"&gt;PLEX&lt;/span&gt;) as well as my raspberry pi to docker containers so that I could experiment more with it and boy, not as easy as I thought it was going to&amp;nbsp;be.&lt;/p&gt;
&lt;p&gt;Most of the applications had specific configuration files in a location that needed to be mounted somewhere, then I had to think of which apps to move to which node cause of the resources on each node, setup the permissions and respective volumes depending on the usage, all in all, it was fun and I learned a&amp;nbsp;lot.&lt;/p&gt;
&lt;p&gt;One last thing was that I knew very little how the networking aspect worked so I had to create networks between some of these so that I could have communication between them. For instance, the Kibana instance for my elastic cluster has a cross-cluster search so I can visualize the data from both clusters in a single pane so I had to figure out how to make these connections to each&amp;nbsp;other.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span class="caps"&gt;NOTE&lt;/span&gt;: Everything in here is using Docker &lt;span class="caps"&gt;SWARM&lt;/span&gt;, so make sure you have your swarm&amp;nbsp;setup.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id="containers"&gt;Containers:&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Elasticsearch&amp;nbsp;clusters&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Home cluster - for things I play with (trump twitter data, couple indices that are used for an app I’m working on, etc.). The home cluster comes with an instance of Logstash and Kibana&amp;nbsp;respectfully.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Server cluster - for reading data that is being generated by a script I made (mostly to keep track of my internet speed, pihole logs), this cluster consists of a gateway node and a data node. One receives the traffic, the other one keeps the&amp;nbsp;data.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Guacamole&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Used to remote access my servers that are online&amp;nbsp;24/7.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Kafka &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt;&amp;nbsp;Zookeeper&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Been playing with it a lot lately, not much else to say. Definitely a cool&amp;nbsp;tool.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;&lt;span class="caps"&gt;LDAP&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I wanted to have some of my services use this as an authentication backend but haven’t had the time to create the schemas and add users, but its&amp;nbsp;running.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Media&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Couple containers to keep track of series and &lt;span class="caps"&gt;TV&lt;/span&gt; shows I watch ( sonarr, radarr, jackett&amp;nbsp;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;MySQL&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Local database so I can dump data sets for me to play&amp;nbsp;with.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Organizr&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;An excellent application that allows you to manage all of your bookmarks, so now I can just click on an icon and I’m taken to a&amp;nbsp;container.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Portainer&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Used to manage most of my stack, sometimes the GUIs are better than the&amp;nbsp;terminal.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Prometheus &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt;&amp;nbsp;Grafana&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;To collect and graph all of the metrics from my&amp;nbsp;systems.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Traefik&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reverse proxy for my containers, no longer have to remember IPs and&amp;nbsp;ports.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Got couple more services running on the servers but due to hardware constraints, mostly video decoding for plex, those remain as system processes that I can turn on/off when&amp;nbsp;needed.&lt;/p&gt;
&lt;p&gt;Same as my PiHole, I found that its easier to just keep it running on my raspberry pi. Might move it to a container soon using&amp;nbsp;mcvlan.&lt;/p&gt;
&lt;h2 id="setup"&gt;Setup&lt;/h2&gt;
&lt;p&gt;Most containers need couple gigs of storage and some don’t require a thing as long as they have a mount for the config file so based on that I ended up creating a couple of mount points as&amp;nbsp;follows:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;/opt/elasticsearch&lt;/code&gt; &lt;code&gt;50GB&lt;/code&gt; on both home and server nodes to allocate the index&amp;nbsp;data.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/opt/prometheus&lt;/code&gt; &lt;code&gt;1GB&lt;/code&gt; to hold the &lt;code&gt;prometheus.yml&lt;/code&gt; required for the scrape targets as well as hosting the time series data collected, by default I have it to only collect a week worth of&amp;nbsp;metrics.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/opt/kafka&lt;/code&gt; &lt;code&gt;500MB&lt;/code&gt; for all of the topic data, couple gigs, nothing&amp;nbsp;special.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/opt/grafana&lt;/code&gt; &lt;code&gt;150MB&lt;/code&gt; to hold the configuration data, one key thing for this one is that the mount point has to be owned by a unique &lt;span class="caps"&gt;ID&lt;/span&gt; for it to work properly, something odd but to be on the lookout&amp;nbsp;for.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/opt/media&lt;/code&gt; &lt;code&gt;250MB&lt;/code&gt; for all of the configurations created by the containers cause I didn&amp;#8217;t want to setup APIs every time i needed those&amp;nbsp;services.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/opt/mysql&lt;/code&gt; &lt;code&gt;500MB&lt;/code&gt; to hold all of my local&amp;nbsp;databases.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="networks"&gt;Networks&lt;/h3&gt;
&lt;p&gt;The final step was to figure out a way for some of these to talk to each other, was going to use &lt;span class="caps"&gt;NGINX&lt;/span&gt; but kept seeing “Traefik” in Reddit so I figured I’d give it a shot…. after couple hours of trying and reading, got it to work in a way that makes sense to me and best of all I could integrate it perfectly with &lt;code&gt;organizr&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Traefik requires you to run all of the containers you want to route the traffic to be on the same network, which is easy with&amp;nbsp;docker.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;docker network create traefik-proxy --driver overlay&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;With that setup, all you have to do is define the network in your compose&amp;nbsp;files.&lt;/p&gt;
&lt;h3 id="compose-files"&gt;Compose&amp;nbsp;Files&lt;/h3&gt;
&lt;p&gt;Since I have a bunch of containers and to give you an idea I’m only going to show you couple examples, if you would like to see all configs feel free to reach out on social media (details at the&amp;nbsp;bottom).&lt;/p&gt;
&lt;p&gt;As a reminder, I got 3 Nodes in Docker Swarm mode with node labels so that I can force docker to run the containers on specific nodes based on the hardware requirements behind&amp;nbsp;them.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ docker node inspect manjaro-server &lt;span class="p"&gt;|&lt;/span&gt; jq .&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;.Spec.Labels.name
&lt;span class="s2"&gt;&amp;quot;server&amp;quot;&lt;/span&gt;
$ docker node inspect manjaro-home &lt;span class="p"&gt;|&lt;/span&gt; jq .&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;.Spec.Labels.name
&lt;span class="s2"&gt;&amp;quot;home&amp;quot;&lt;/span&gt;
$ docker node inspect pi &lt;span class="p"&gt;|&lt;/span&gt; jq .&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;.Spec.Labels.name
&lt;span class="s2"&gt;&amp;quot;pi&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Traefik&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The documentation suggests you run traefik on your master node so it can control and view all of the container events so I&amp;#8217;ve forced it to run on the manager node all the&amp;nbsp;time.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;3.7&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;traefik&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;traefik&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;v2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;traefik&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;proxy&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="c1"&gt;--entrypoints.metrics.address=:8082&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="c1"&gt;--entrypoints.http.address=:80&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="c1"&gt;--api.dashboard=true&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="c1"&gt;--api.insecure=true&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="c1"&gt;--providers.docker&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="c1"&gt;--providers.docker.swarmMode=true&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="c1"&gt;--providers.docker.exposedByDefault=false&lt;/span&gt;
    &lt;span class="n"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;8080&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8080&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;8082&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8082&lt;/span&gt;
    &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;docker&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sock&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;docker&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sock&lt;/span&gt;
    &lt;span class="n"&gt;deploy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;placement&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;constraints&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
          &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;role&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;manager&lt;/span&gt;

&lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;traefik&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;proxy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;external&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Guacamole&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Running this as well on the node that is 24/7 so i can access it remotely whenever i&amp;nbsp;want.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;3.7&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;guacamole&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;oznu&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;guacamole&lt;/span&gt;
    &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;guacamole&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;
    &lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;traefik&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;proxy&lt;/span&gt;
    &lt;span class="n"&gt;deploy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;placement&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;constraints&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
          &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;server&lt;/span&gt;
      &lt;span class="n"&gt;labels&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;traefik.enable=true&amp;quot;&lt;/span&gt;
        &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;traefik.http.routers.guacamole.entrypoints=http&amp;quot;&lt;/span&gt;
        &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;traefik.http.routers.guacamole.rule=Host(`guacamole.local.net`)&amp;quot;&lt;/span&gt;
        &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;traefik.http.services.guacamole.loadbalancer.server.port=8080&amp;quot;&lt;/span&gt;
        &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;traefik.docker.network=traefik-proxy&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;traefik&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;proxy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;external&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="conclusion"&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;With a couple compose files pushed to a private &lt;span class="caps"&gt;GIT&lt;/span&gt; repo (mostly for sensitive data on the configurations, need to learn how to use docker secrets) my stack is fully automated, now with an ansible playbook I can have the same setup in&amp;nbsp;minutes.&lt;/p&gt;
&lt;p&gt;Again, this was a long task and I did learn a lot on how to debug and troubleshoot mostly networking problems with containers and being my first real project that used docker-compose it was good&amp;nbsp;fun.&lt;/p&gt;
&lt;p&gt;I hope you liked it, until next time,&amp;nbsp;Adios.&lt;/p&gt;</content><category term="containers"></category><category term="docker"></category></entry><entry><title>Use docker containers for your python flask apps</title><link href="https://mvaldes14.github.io/blog/docker-flask-apps.html" rel="alternate"></link><published>2018-12-07T00:00:00-06:00</published><updated>2018-12-07T00:00:00-06:00</updated><author><name>Miguel Valdes</name></author><id>tag:mvaldes14.github.io,2018-12-07:/blog/docker-flask-apps.html</id><summary type="html">&lt;p&gt;’ve been recently using my work laptop to code while things are calm and I’m waiting for the next fire to pop up (I work in production support). So once i installed everything I needed…. python, git, vscode, nodejs, etc. Realized one big thing, everything works differently in windows and im already used to work in Linux &lt;span class="caps"&gt;OS&lt;/span&gt; systems and i cannot just switch the &lt;span class="caps"&gt;OS&lt;/span&gt; in my work laptop cause then the &lt;span class="caps"&gt;IT&lt;/span&gt; guys going to get me&amp;nbsp;fired..&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;&lt;em&gt;Make your apps easier to deploy and carry with&amp;nbsp;you&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I’ve been recently using my work laptop to code while things are calm and I’m waiting for the next fire to pop up (I work in production support). So once i installed everything I needed…. python, git, vscode, nodejs, etc. Realized one big thing, everything works differently in windows and im already used to work in Linux &lt;span class="caps"&gt;OS&lt;/span&gt; systems and i cannot just switch the &lt;span class="caps"&gt;OS&lt;/span&gt; in my work laptop cause then the &lt;span class="caps"&gt;IT&lt;/span&gt; guys going to get me&amp;nbsp;fired.&lt;/p&gt;
&lt;p&gt;So while looking at solutions to mitigate my situation, decided to force myself to use something new and exciting because it would’ve been easy to just install Vagrant/VirtualBox and spin a machine to do my dev work but where is the fun in&amp;nbsp;that?&lt;/p&gt;
&lt;p&gt;Enter Docker…
In this new &lt;span class="caps"&gt;IT&lt;/span&gt; world where everything is moving towards containers and microservices, thought it would be a good idea to jump on the hype train and learn how to ‘dockerize’ my flask applications. So I watched some videos and tutorials, read some of the documentation and did a test on a dummy application, so here we&amp;nbsp;go.&lt;/p&gt;
&lt;p&gt;Install Docker Engine First thing is of course installing Docker, now depending on your &lt;span class="caps"&gt;OS&lt;/span&gt; you can get it one way or another. Unless you have an enterprise need or license, go with the &lt;span class="caps"&gt;CE&lt;/span&gt; versions. Docker&amp;nbsp;install&lt;/p&gt;
&lt;p&gt;Create or use your application In my case, most of my applications were either running on my local rasperby pi at home or on heroku so I just decided to create a super simple dummy app that would display a picture and some&amp;nbsp;text.&lt;/p&gt;
&lt;p&gt;So once i created a new virtualenv using pipenv, my folder structure looked like&amp;nbsp;this.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="err"&gt;├──&lt;/span&gt; &lt;span class="n"&gt;Pipfile&lt;/span&gt;
&lt;span class="err"&gt;├──&lt;/span&gt; &lt;span class="n"&gt;Pipfile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;
&lt;span class="err"&gt;└──&lt;/span&gt; &lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;flask&lt;/span&gt;
    &lt;span class="err"&gt;├──&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;
    &lt;span class="err"&gt;├──&lt;/span&gt; &lt;span class="n"&gt;requirements&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;txt&lt;/span&gt;
    &lt;span class="err"&gt;└──&lt;/span&gt; &lt;span class="n"&gt;templates&lt;/span&gt;
        &lt;span class="err"&gt;└──&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;app.py&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;flask&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;random&lt;/span&gt;

&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Flask&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;SECRET_KEY&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;randint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nd"&gt;@app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render_template&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;index.html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see an incredibly simple app that returns an even simpler&amp;nbsp;‘index.html’.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;index.html&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt; &lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;en&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;meta&lt;/span&gt; &lt;span class="na"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;meta&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;viewport&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;content&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;width=device-width, initial-scale=1.0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;meta&lt;/span&gt; &lt;span class="na"&gt;http-equiv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;X-UA-Compatible&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;content&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ie=edge&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;style&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;body&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;background-color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;magenta&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;margin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;padding&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;h1&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;pink&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;style&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Document&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Docker&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt; Container python app &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;hr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;img&lt;/span&gt; &lt;span class="na"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.imagefully.com/wp-content/uploads/2015/08/Funny-Cats-Lol-Sup-Bro-Image.jpg&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;alt&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt; Create your&amp;nbsp;Dockerfile &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Now, in order for you to interact with the Docker Engine you need to instruct docker how to build your image. An image can be seen as a snapshot of how something should look like including configurations, files, environment variables,&amp;nbsp;etc.&lt;/p&gt;
&lt;p&gt;This is the part were I got stuck the most since I had to read what the keywords do and how to interact with them, so if you want the reference for everything, check&amp;nbsp;here.&lt;/p&gt;
&lt;p&gt;Will give you a summarized version of what I did for my personal&amp;nbsp;image.&lt;/p&gt;
&lt;p&gt;All dockerfiles must either be using an existing base image or using something from&amp;nbsp;scratch.&lt;/p&gt;
&lt;p&gt;Since the docker store already contains a bi-zillion images from official repos like Ubuntu, centos, nginx, mysql, etc. There should be no need for you to create something from scratch were you basically build the &lt;span class="caps"&gt;OS&lt;/span&gt; layers and everything. So in my case i went with a very simple Ubuntu&amp;nbsp;image.&lt;/p&gt;
&lt;p&gt;This is how you ‘inherit’ or use the base image from the docker&amp;nbsp;store.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;FROM ubuntu:latest&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you want to see all of the images in your system simply run the command docker images. In my case i downloaded and played around postgress as well so my output looked&amp;nbsp;like.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE&lt;/span&gt;
&lt;span class="err"&gt;docker.io/ubuntu     latest              0458a4468cbc        12 days ago         111.7 MB&lt;/span&gt;
&lt;span class="err"&gt;docker.io/postgres   9.6-alpine          7470b931fc2e        4 weeks ago         37.82 MB&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, an ubuntu image is 111.7 &lt;span class="caps"&gt;MB&lt;/span&gt; &lt;span class="caps"&gt;ONLY&lt;/span&gt;!!! - This to me is the beauty of the containers, incredibly light weight and super portable for you to carry around, if we were doing this with a Virtual Machine, we would be talking about gbs of&amp;nbsp;data.&lt;/p&gt;
&lt;p&gt;Next command on a typical file are labels, which can contain anything you want, mostly used for&amp;nbsp;metadata.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;LABEL&lt;/span&gt; maintainer=&amp;#8221;yourname&amp;#8221; version=&amp;#8221;1.0&amp;#8221; maintainer_email=&amp;#8221;youremail@mail.com&amp;#8221;
&lt;span class="caps"&gt;NOTE&lt;/span&gt;: Most images still use the deprecated keyword &lt;span class="caps"&gt;MAINTAINER&lt;/span&gt;. Ideally you want to use LABELs&amp;nbsp;instead.&lt;/p&gt;
&lt;p&gt;Next command is super important as it allows you to specify what you want docker to do while building your image, this is where you typically install or do things on top of base&amp;nbsp;images.&lt;/p&gt;
&lt;p&gt;In my case I wanted to install pip and the build-essential bundle so I could run my flask&amp;nbsp;application.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;RUN apt-get update -y &amp;amp;&amp;amp; apt-get install -y python-pip python-dev build-essential&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ideally you want to ‘chain’ your commands using ‘&amp;amp;&amp;amp;’ so you reduce the amount of layers it&amp;nbsp;generates.&lt;/p&gt;
&lt;p&gt;Once you have everything installed you want to move your application code into the image to be used, so in here based on what I read you can either use &lt;span class="caps"&gt;COPY&lt;/span&gt; or &lt;span class="caps"&gt;ADD&lt;/span&gt;. You might want to read the documentation to see which one to pick but based on this &lt;span class="caps"&gt;SO&lt;/span&gt; post. For basic data moving, either one will work just&amp;nbsp;fine.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;COPY ./python-flask/ /usr/src/app&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As most python applications, we requires modules and packages to run things, unless you are using the built-in library of course. But we doing flask, we big boys now so we need to install the packages and its dependencies. We simply add another layer that you will most likely&amp;nbsp;recognize.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;RUN pip install -r /usr/src/app/requirements.txt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We run it at this point since the files were just copied a line above. Remember our requirements.txt was inside the application folder. You can modify the structure and alter the layers but you need to install your requirements at some&amp;nbsp;point.&lt;/p&gt;
&lt;p&gt;Once everything is copied and installed we need to tell Docker where we will run our things, so we make use of &lt;span class="caps"&gt;WORKDIR&lt;/span&gt;. It basically sets the directory where you will run your commands from. If you are running a binary that is available in your \$&lt;span class="caps"&gt;PATH&lt;/span&gt; then you may not need this but since i want to make sure my application launches and uses the code we copied above, I force the&amp;nbsp;location.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;WORKDIR /usr/src/app&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;A key thing with containers is that, they create and spawn the process you tell them to but if you need to interact with it, you need a port to talk to. So in our case, since by default all flask apps run on port 5000. We tell Docker that we want to expose that port in our image so we can actually interact with&amp;nbsp;it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;EXPOSE 5000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally, we run the&amp;nbsp;application.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;CMD [&amp;quot;flask&amp;quot;,&amp;quot;run&amp;quot;,&amp;quot;--host=0.0.0.0&amp;quot;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Do note we are using &lt;span class="caps"&gt;CMD&lt;/span&gt; instead of &lt;span class="caps"&gt;RUN&lt;/span&gt;. This is because we just want this command to be executed as soon as the container is launched, in our case we use the preferred form (called exec) of separating items into a list. You can also use it in a shell form (without the list [] and ”); Again for specifics the documentation does&amp;nbsp;wonders.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Build your image&lt;/strong&gt;
Once we have our files and structure ready, we need to build our image using the Dockerfile we&amp;nbsp;created.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;.&lt;/span&gt;
&lt;span class="err"&gt;├── Dockerfile&lt;/span&gt;
&lt;span class="err"&gt;├── Pipfile&lt;/span&gt;
&lt;span class="err"&gt;├── Pipfile.lock&lt;/span&gt;
&lt;span class="err"&gt;└── python-flask&lt;/span&gt;
&lt;span class="err"&gt;    ├── app.py&lt;/span&gt;
&lt;span class="err"&gt;    ├── requirements.txt&lt;/span&gt;
&lt;span class="err"&gt;    └── templates&lt;/span&gt;
&lt;span class="err"&gt;        └── index.html&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To build our image we interact with the docker &lt;span class="caps"&gt;API&lt;/span&gt;, or the &lt;span class="caps"&gt;CLI&lt;/span&gt; for mere mortals like me… By using the following&amp;nbsp;command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;docker build -t flask .&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Things to note. -t &lt;span class="caps"&gt;TAG&lt;/span&gt; Name to use for your image, in my case I’m saying flask so its easy to remember. . With the dot we specify that we want to build using the Dockerfile available in our current location, if you want to use the file from a different place just specify the&amp;nbsp;path.&lt;/p&gt;
&lt;p&gt;Once the process completes, if you re-run docker images you should see a new image in your&amp;nbsp;repository.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE&lt;/span&gt;
&lt;span class="err"&gt;flask                latest              5394dbc7f0eb        23 hours ago        424.6 MB&lt;/span&gt;
&lt;span class="err"&gt;docker.io/ubuntu     latest              0458a4468cbc        12 days ago         111.7 MB&lt;/span&gt;
&lt;span class="err"&gt;docker.io/postgres   9.6-alpine          7470b931fc2e        4 weeks ago         37.82 MB&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see, our image increased quite a bit, but even with that size it can be up and running in seconds. So remember, the more you install and add to it, the bigger it cause, duh logic&amp;nbsp;right?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Run your image&lt;/strong&gt;
If you made it this far, good for you mate. We are almost done. To run our image we again interact with the &lt;span class="caps"&gt;CLI&lt;/span&gt; but in here we need to add some specific parameters to tell it where to put our port and give it a&amp;nbsp;name.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;docker run -d \&lt;/span&gt;
&lt;span class="err"&gt;-p 80:5000 \&lt;/span&gt;
&lt;span class="err"&gt;--name flaskapp \&lt;/span&gt;
&lt;span class="err"&gt;-e FLASK_APP=&amp;#39;app.py&amp;#39; \&lt;/span&gt;
&lt;span class="err"&gt;flask&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The above command should give you a container id, validate it is actually running by doing docker ps. Additionally you can see the usual flask logs by running docker logs &lt;IMAGENAME&gt;.&lt;/p&gt;
&lt;p&gt;Since we passed the &amp;#8212;name parameter, we just do docker logs flaskapp. And we get the&amp;nbsp;following.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;* Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)&lt;/span&gt;
&lt;span class="err"&gt;24.28.147.10 - - [14/Feb/2018 17:00:43] &amp;quot;GET / HTTP/1.1&amp;quot; 200 -&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It is very important that the host is ‘0.0.0.0’ otherwise you will not be able to access it from the outside. If you want to know why, check out this&amp;nbsp;link.&lt;/p&gt;
&lt;p&gt;Finally, if we hit the &lt;span class="caps"&gt;IP&lt;/span&gt; where the docker image is running, we should get our flask application. Questions? Concerns? Was this&amp;nbsp;cool?&lt;/p&gt;
&lt;p&gt;Let me know in the section below. Next time we will use the image to do live testing in our&amp;nbsp;code.&lt;/p&gt;
&lt;p&gt;Cheers!&lt;/p&gt;</content><category term="containers"></category><category term="devops"></category><category term="docker"></category><category term="python"></category><category term="flask"></category></entry></feed>